<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>.:: Ecorec ::.</title>

    <link href="../../../static/css/bootstrap.min.css" rel="stylesheet"
          th:href="@{/css/bootstrap.min.css}">
    <link href="../../../static/font-awesome/css/font-awesome.css" rel="stylesheet"
          th:href="@{/font-awesome/css/font-awesome.css}">

    <link href="../../../static/css/animate.css" rel="stylesheet"
          th:href="@{/css/animate.css}">
    <link href="../../../static/css/style.css" rel="stylesheet"
          th:href="@{/css/style.css}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<style>
    h1,h2,h3,h4,h5,h6{
        text-align: center;
    }
</style>
<style>
    @media only print {
        body {
            visibility: hidden;
        }
        .divID {
            visibility: visible;
        }
    }
</style>

<body>

<div id="wrapper">

    <div th:replace="fragments/template :: side-menu"></div>

    <div id="page-wrapper" class="gray-bg">

        <div th:replace="fragments/template :: top-navbar"></div>
        <div th:replace="fragments/template :: page-heading"></div>
        <div th:replace="fragments/template :: alerts"></div>

        <div class="wrapper wrapper-content animated fadeInRight ecommerce" >
<!--            <input  type="button" value="Convert HTML to PDF"-->
<!--                    onclick="convertHTMLtoPDF()">-->
            <button onclick="window.print()">Print</button>
            <div class="ibox-content m-b-sm border-bottom col-10" id="divID">
                <fieldset class="border p-2">
                    <legend class="w-auto">Performance Report</legend>

                    <div class="row">
                        <div class="col-6">
                            <img th:src="@{/img/download.png}" src="../../static/img/download.png" class="logo" style="height: 100px !important; width: 200px !important;"/>
                        </div>
                        <div class="col-6">
                            <table class="table" style="border: none; width: 100%">
                                <tr>
                                    <th>Name</th>
                                    <td th:text="${owner.fullName}"></td>
                                    <th>Position</th>
                                    <td th:text="${owner.position}"></td>
                                </tr>
                                <tr>
                                    <th>Date</th>
                                    <td th:text="${endDate}"></td>
                                    <th>Department</th>
                                    <td th:text="${owner.department?.name}"></td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div id="chartContainer" class="row" style="height: 370px; max-width: 80%; margin: 5px 5px;"></div>
                    <br>
                    <h2>Performance Improvement Plan</h2>
                    <h4>Confidential</h4>

                    <p>1. The purpose of this Performance Improvement Plan (PIP) is to define performance deficiencies, clarify performance expectations, and allow you the
                        opportunity to demonstrate your ability to meet the performance expectations outlined below. To facilitate sustained improvement, the following plan has been
                        established. This plan may be modified as necessary depending on your progress.</p>

                    <div th:if="${not #lists.isEmpty(pips)}">
                        <table class="table">
                            <thead>
                            <tr>
                                <td class="italic"><b>Target area</b>
                                    Detail specific area where performance standards have not been met</td>
                                <td class="italic"><b>Performance concern</b>
                                    Detail specific dates and examples of where the standards have not been met</td>
                                <td class="italic"><b>Expected standard of performance</b>
                                    Detail what is expected of the employee in terms of their performance i.e., what does ‘good’</td>
                                <td class="italic"><b>Agreed improvement actions</b>
                                    Detail what actions need to be taken to meet expected standard of performance</td>
                                <td class="italic"><b>Support</b>
                                    Detail what has been agreed in terms of support required to achieve the expected standard of performance</td>
                                <td class="italic"><b>Review Date</b></td>
                                <td class="italic"><b>Review notes</b>
                                    Detail improvement made and any future review dates</td>
                                <td class="italic">Date</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="pip : ${pips}">
                                <td th:text="${pip.targetArea}"></td>
                                <td th:text="${pip.concern}"></td>
                                <td th:text="${pip.expectedStandard}"></td>
                                <td th:text="${pip.agreedAction}"></td>
                                <td th:text="${pip.requiredSupport}"></td>
                                <td th:text="${pip.endDate}"></td>
                                <td th:text="${pip.reviewNotes}"></td>
                                <td th:text="${pip.endDate}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <p>2. Follow-up Updates – You will receive feedback on your progress according to the following schedule: </p>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <tr>
                                <th>Date Scheduled</th>
                                <th>Activity</th>
                            </tr>
                            <tr>
                                <td></td>
                                <td>30-day Update</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>60-day Update</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>90-day Update and Status </td>
                            </tr>
                        </table>
                    </div>
                    <p>3. By signing below, you acknowledge that you and your supervisor has discussed this performance improvement plan.</p>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>This action plan has been agreed by</th>
                                <td>Signed</td>
                                <td>Date</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th>Manager</th>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <th>Subordinate</th>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <p>4. PROGRESS SUMMARY 30-day/60-day/90-day Updates</p>

                    <div class="table-responsive">
                        <table class="table table-bordered" border="1" style="word-wrap: break-word">
                            <thead>
                            <tr>
                                <th>Performance Concern</th>
                                <th>Date of Review</th>
                                <td><b>Progress/Review Notes</b>
                                    Detail the status of the
                                    progress made at the review
                                    meeting i.e. (Satisfactory
                                    improvement, partial
                                    improvement) or (Insufficient/No improvement)</td>
                                <th>Next Action Required</th>
                                <th>Due Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4>Final Rating / Review</h4>
                    <table>
                        <tr>
                            <td>Employee has achieved required improvements as described above.</td>
                            <td><input type="checkbox" checked="checked" /></td>
                        </tr>
                        <tr>
                            <td>Employee has not achieved required improvements as described above.</td>
                            <td><input type="checkbox" /></td>
                        </tr>
                    </table>

                    <table>
                        <tr>
                            <th>Supervisor:</th>
                            <td></td>
                            <th>Date:</th>
                            <td></td>
                        </tr>
                        <tr>
                            <th>Employee:</th>
                            <td></td>
                            <th>Date:</th>
                            <td></td>
                        </tr>
                    </table>
                    <h4>Additional Comments</h4>
                    <p style="text-decoration: underline;"></p>
                </fieldset>
            </div>

        </div>
        <div th:replace="fragments/template :: footer"></div>

    </div>
</div>

<!-- Mainly scripts -->
<script src="../../../static/js/jquery-3.6.0.min.js"
        th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script src="../../../static/js/popper.min.js"
        th:src="@{/js/popper.min.js}"></script>
<script src="../../../static./js/bootstrap.js"
        th:src="@{/js/bootstrap.js}"></script>
<script src="../../../static/js/plugins/metisMenu/jquery.metisMenu.js"
        th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>

<!-- Custom and plugin javascript -->
<script src="../../../static/js/inspinia.js"
        th:src="@{/js/inspinia.js}"></script>
<script src="../../../static/js/plugins/pace/pace.min.js"
        th:src="@{/js/plugins/pace/pace.min.js}"></script>

<script type="text/javascript">
    function convertHTMLtoPDF() {
        const { jsPDF } = window.jspdf;

         let doc = new jsPDF('p', 'mm', [850, 1400]);
        // let doc = new jsPDF({
        //     orientation: 'l',
        //     unit: 'mm',
        //     format: 'a4',
        //     // putOnlyUsedFonts:true,
        //     matrix: [1500, 1400]
        // });
        let pdfjs = document.querySelector('#divID');
        let canvas = document.getElementById('chartContainer');
        let canvasImg = canvas.toDataURL();
        doc.addImage(canvasImg, 'PNG', 5, 20, width-20, 70);

        doc.html(pdfjs, {
            callback: function(doc) {
                doc.save("newpdf.pdf");
            },
            // x: 12,
            // y: 12
        });
    }
</script>

<script>
    window.onload = function () {

        var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            // theme: "light2",
            title:{
                text: "Simple Line Chart"
            },
            axisY:{
                includeZero: false
            },
            data: [{
                type: "line",
                dataPoints: [
                    { y: 450 },
                    { y: 414},
                    { y: 520, indexLabel: "highest",markerColor: "green", markerType: "triangle" },
                    { y: 460 },
                    { y: 450 },
                    { y: 500 },
                    { y: 480 },
                    { y: 480 },
                    { y: 410 , indexLabel: "lowest",markerColor: "red", markerType: "cross" },
                    { y: 500 },
                    { y: 480 },
                    { y: 510 }
                ]
            }]
        });
        chart.render();

    }
</script>
<script src="../../static/js/plugins/canvas/canvasjs.min.js" th:src="@{'/js/plugins/canvas/canvasjs.min.js'}"></script>
</body>

</html>
