<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>.:: Ecorec ::.</title>

    <link href="../../../static/css/bootstrap.min.css" rel="stylesheet"
          th:href="@{/css/bootstrap.min.css}">
    <link href="../../../static/font-awesome/css/font-awesome.css" rel="stylesheet"
          th:href="@{/font-awesome/css/font-awesome.css}">

    <link href="../../../static/css/animate.css" rel="stylesheet"
          th:href="@{/css/animate.css}">
    <link href="../../../static/css/style.css" rel="stylesheet"
          th:href="@{/css/style.css}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<style>
    h1,h2,h3,h4,h5,h6{
        text-align: center;
    }
</style>

<body>

<div id="wrapper">

    <div th:replace="fragments/template :: side-menu"></div>

    <div id="page-wrapper" class="gray-bg">

        <div th:replace="fragments/template :: top-navbar"></div>
        <div th:replace="fragments/template :: page-heading"></div>
        <div th:replace="fragments/template :: alerts"></div>

        <div class="wrapper wrapper-content animated fadeInRight ecommerce" >
            <input  type="button" value="Convert HTML to PDF"
                    onclick="convertHTMLtoPDF()">
            <div class="ibox-content m-b-sm border-bottom" id="divID">
                <fieldset class="border p-2">
                    <legend class="w-auto">Performance Report</legend>

                    <div class="row">
                        <div class="col-6">
                            <img th:src="@{/img/download.png}" src="../../static/img/download.png" class="logo" style="height: 100px !important; width: 200px !important;"/>
                        </div>
                        <div class="col-6">
                            <table class="table" style="border: none; width: 100%">
                                <tr>
                                    <th>Name</th>
                                    <td th:text="${owner.fullName}"></td>
                                    <th>Position</th>
                                    <td th:text="${owner.position}"></td>
                                </tr>
                                <tr>
                                    <th>Date</th>
                                    <td th:text="${endDate}"></td>
                                    <th>Department</th>
                                    <td th:text="${owner.department?.name}"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <h2>Performance Improvement Plan</h2>
                    <h4>Confidential</h4>

                    <p>1. The purpose of this Performance Improvement Plan (PIP) is to define performance deficiencies, clarify performance expectations, and allow you the
                        opportunity to demonstrate your ability to meet the performance expectations outlined below. To facilitate sustained improvement, the following plan has been
                        established. This plan may be modified as necessary depending on your progress.</p>

                    <div th:if="${not #lists.isEmpty(pips)}">
                        <table class="table">
                            <thead>
                            <tr>
                                <td class="italic"><b>Target area</b>
                                    Detail specific area where performance standards have not been met</td>
                                <td class="italic"><b>Performance concern</b>
                                    Detail specific dates and examples of where the standards have not been met</td>
                                <td class="italic"><b>Expected standard of performance</b>
                                    Detail what is expected of the employee in terms of their performance i.e., what does ‘good’</td>
                                <td class="italic"><b>Agreed improvement actions</b>
                                    Detail what actions need to be taken to meet expected standard of performance</td>
                                <td class="italic"><b>Support</b>
                                    Detail what has been agreed in terms of support required to achieve the expected standard of performance</td>
                                <td class="italic"><b>Review Date</b></td>
                                <td class="italic"><b>Review notes</b>
                                    Detail improvement made and any future review dates</td>
                                <td class="italic">Date</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="pip : ${pips}">
                                <td th:text="${pip.targetArea}"></td>
                                <td th:text="${pip.concern}"></td>
                                <td th:text="${pip.expectedStandard}"></td>
                                <td th:text="${pip.agreedAction}"></td>
                                <td th:text="${pip.requiredSupport}"></td>
                                <td th:text="${pip.endDate}"></td>
                                <td th:text="${pip.reviewNotes}"></td>
                                <td th:text="${pip.endDate}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </fieldset>
            </div>

        </div>
        <div th:replace="fragments/template :: footer"></div>

    </div>
</div>

<!-- Mainly scripts -->
<script src="../../../static/js/jquery-3.6.0.min.js"
        th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script src="../../../static/js/popper.min.js"
        th:src="@{/js/popper.min.js}"></script>
<script src="../../../static./js/bootstrap.js"
        th:src="@{/js/bootstrap.js}"></script>
<script src="../../../static/js/plugins/metisMenu/jquery.metisMenu.js"
        th:src="@{/js/plugins/metisMenu/jquery.metisMenu.js}"></script>

<!-- Custom and plugin javascript -->
<script src="../../../static/js/inspinia.js"
        th:src="@{/js/inspinia.js}"></script>
<script src="../../../static/js/plugins/pace/pace.min.js"
        th:src="@{/js/plugins/pace/pace.min.js}"></script>

<script type="text/javascript">
    function convertHTMLtoPDF() {
        const { jsPDF } = window.jspdf;

        let doc = new jsPDF('l', 'mm', [1500, 1400]);
        let pdfjs = document.querySelector('#divID');

        doc.html(pdfjs, {
            callback: function(doc) {
                doc.save("newpdf.pdf");
            },
            x: 12,
            y: 12
        });
    }
</script>

</body>

</html>
